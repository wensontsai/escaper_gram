
   <!-- <div class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="background: white">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Escapergram</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        </div>
      </div>
    </div> -->
    <div class="container">
        <div class="my_navbar">
          <ul>
            <li id="site-title">Escaper gram</li>
            <li id="my_nav_info"><a href="/globe/index"> take it to the globe . </a></li>
            <li><button id="x_hrs_button" type="button">2 hours ago</button></li>
            <li id="updater">this is happening now in <%= params[:name] %></li>

          </ul>

        </div>

      <div class="starter-template">

        <div id='initial_images_div' ></div>
        <div id='x_hrs_div'></div>



      </div>

    </div><!-- /.container -->



<script>
var hours_ago = 2;

$(document).ready(function() {

  var country_name = "<%= params[:name] %>";
  var my_lat;
  var my_lat;

  var set_lat_lon = function(location_obj){
      my_lat = location_obj.results[0].geometry.location.lat;
      my_lon = location_obj.results[0].geometry.location.lng;
debugger;
  }

  var set_place_name = function (){
      $( "#where_u_at").html(country_name);
  };

  var initial_images = function (images_obj){
      for (i = 0; i < images_obj.length; i++){
        if (typeof images_obj[i] != "undefined") {
          if(images_obj[i].images.low_resolution){
            $("#initial_images_div").append('<div class="imgbox"><a href="' + images_obj[i].link + '"><img src="' + images_obj[i].images.low_resolution.url + '"><span>'+images_obj[i].created_time+'</span></a></div>');
          }
        }
      }
  };



  $.get("/get_lat_lon", {name: country_name}, set_lat_lon);
  set_place_name();
  $.get("/get_images", {lat: my_lat,lon: my_lon}, initial_images);


  var got_images = function (images_obj){
      for (i = 0; i < images_obj.length; i++){
        if (typeof images_obj[i] != "undefined") {
          if(images_obj[i].images.low_resolution){
            // console.log(images_obj[i]);
            $("#x_hrs_div").prepend('<div class=" imgbox ' + hours_ago + '_hrs_class"><a href="' + images_obj[i].link + '"><img src="' + images_obj[i].images.low_resolution.url + '"><span>'+images_obj[i].created_time+'</span></a></div>');
          }
        }
      }
  };


  $("#x_hrs_button").click(function(event){
      event.preventDefault();
      if (hours_ago === 2){
          $( "#my_nav_info").append('<li id="my_nav_info"><a href="/get_images?lat=my_lat,lon: my_lon"> back to now. </a></li>');
          $( "#initial_images" ).animate({
            opacity: 0.35,
            }, 700, function() {
            // Animation complete.
          });

          $( "#initial_images_div" ).remove();
      }


      if(hours_ago < 24){
          $.get("/get_images_x_hrs_ago", {lat: my_lat,lon: my_lon, hours_ago:hours_ago+=2}, got_images);
          $("#x_hrs_button").html(hours_ago + " hours ago");
          $( "." +(hours_ago-2)+ "_hrs_class" ).animate({
              opacity: 0.35,
              }, 400, function() {
              // Animation complete.
          });
          $( "#updater").html("this is " +(hours_ago-2)+ " hours ago in "+address);
        } else {
          $( "#updater").html("you've seen the last 24hrs");
      }

  });



});
</script>








